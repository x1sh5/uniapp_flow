"use strict";const e=require("../../common/vendor.js"),o=require("../../common/weapp-cookie.js"),t={data:()=>({depth:1}),methods:{login(t){console.log(t);const s=this,r=this.$store.state.apiBaseUrl+"/api/Account/login";e.index.requestWithCookie({url:r,method:"POST",data:JSON.stringify(t.detail.value),success:t=>{if(console.log(t),200===t.statusCode){let a=r.split("/")[2].split(":")[0];o.cookieManager.default.setResponseCookies(t.data.accessToken,a),o.cookieManager.default.setResponseCookies(t.data.refreshToken,a),s.$store.commit("login"),s.$store.commit("setUserName",t.data.userName),s.$store.commit("setUserAvatar",t.data.Avatar),"order"===this.refer?e.index.redirectTo({url:"/pages/order/order"}):e.index.reLaunch({url:"/pages/userCenter/userCenter"})}else 401===t.statusCode&&e.index.showModal({content:t.data,showCancel:!1})},complete(){}})},register(){e.index.navigateTo({url:"/pages/register/register"})}},onLoad(e){const o=e.refer;console.log(o),this.refer=o,"usercenter"===o?(console.log("equal"),this.depth=1):this.depth=3}};const s=e._export_sfc(t,[["render",function(o,t,s,r,a,i){return{a:e.o(((...e)=>i.login&&i.login(...e))),b:e.o(((...e)=>i.register&&i.register(...e)))}}]]);wx.createPage(s);
